مشروع Abo Ameer – نسخة متقدمة (لوحة إدارة + دخول + Rating + Tags + حالة الدفع)

الميزات في هذه النسخة:
- فريقان (أحمر + أخضر) بخطة 4–3–1 مع حارس (9 لاعبين لكل فريق، 18 لاعب).
- قمصان ثلاثية الأبعاد لكل فريق + قميص خاص لحارس المرمى.
- حجز المراكز من واجهة "صفحة الحجز" مع حفظ الأسماء في Supabase.
- لوحة إدارة كاملة للمسؤول:
  - تسجيل الدخول (Email + Password عبر Supabase Auth).
  - تعديل Rating لكل لاعب (من 10).
  - إضافة Tags (مثال: سريع، جناح، بديل جاهز).
  - إضافة ملاحظة نصية لكل مركز.
  - تغيير حالة الدفع (مدفوع / غير مدفوع).
  - إلغاء الحجوزات.

ملفات مهمة:
- src/App.tsx           ← الواجهة الكاملة (حجز + إدارة + Auth)
- src/supabaseClient.ts ← إعداد اتصال Supabase
- public/pitch/pitch-top-view-mobile.png ← صورة الملعب
- public/shirts/*.png   ← صور القمصان (أحمر، أخضر، حارس)

----------------------------------------
إعداد قاعدة البيانات في Supabase
----------------------------------------

1) جدول bookings (لو لم يكن موجوداً):

استخدم هذا الـ SQL في لوحة Supabase (قسم SQL):

create table if not exists bookings (
  id bigserial primary key,
  team text not null,           -- 'red' أو 'green'
  position_key text not null,   -- GK, LB, CB1, ...
  player_name text not null,
  rating integer,
  tags text[],
  note text,
  payment_status text default 'unpaid',
  created_at timestamptz default now(),
  unique (team, position_key)
);

2) تفعيل Auth وإنشاء مستخدم مسؤول:

- من لوحة Supabase:
  - Auth → Providers → Email
    - فعّل خيار "Enable email/password".
  - Auth → Users → Add user
    - ضع بريد المسؤول (مثال: admin@aboameer.com)
    - ضع كلمة مرور.
    - لا تحتاج تفعيل البريد في هذه المرحلة (اختياري).

3) مفاتيح Supabase في .env.local:

- في مجلد المشروع، انسخ الملف:
  .env.example  ← إلى  .env.local

- افتح .env.local وضع القيم من Supabase (Settings → API):

VITE_SUPABASE_URL=رابط_مشروعك
VITE_SUPABASE_ANON_KEY=anon_key_العام

----------------------------------------
تشغيل المشروع (Windows + PowerShell)
----------------------------------------

1) تثبيت الحزم (أول مرة فقط):

cd C:\المسار\إلى\abo-ameer-lineups-v4
npm install

2) تشغيل التطوير:

npm run dev

3) افتح الرابط الذي يظهر لك (غالباً http://localhost:5173).

----------------------------------------
طريقة الاستخدام
----------------------------------------

1) صفحة الحجز:
- اختر "صفحة الحجز" من الأعلى.
- اختر الفريق (أحمر/أخضر) فوق الملعب.
- اضغط "احجز هذا المركز" على أي قميص.
- اكتب اسم اللاعب، ثم تأكيد.
- يظهر الاسم أسفل القميص ويُحفظ في Supabase (إن كانت الإعدادات صحيحة).

2) لوحة الإدارة:
- من الأعلى اضغط "لوحة الإدارة".
- أدخل بريد وكلمة مرور المسؤول (التي أنشأتها في Supabase).
- بعد تسجيل الدخول:
  - سترى عمودين: إدارة مراكز الفريق الأحمر، وإدارة مراكز الفريق الأخضر.
  - لكل مركز محجوز يمكنك:
    - تعيين Rating (من 10).
    - كتابة Tags مفصولة بفواصل، مثل: سريع, جناح, بديل جاهز.
    - كتابة ملاحظة نصية.
    - تغيير حالة الدفع (غير مدفوع / مدفوع).
    - إلغاء الحجز بالكامل.

ملاحظة الدفع:
- حالياً يتم تغيير حالة الدفع يدوياً من لوحة الإدارة.
- لربط بوابة دفع حقيقية (Stripe/Tap/الخ) تحتاج Back-end يستقبل Webhook من بوابة الدفع،
  ثم يحدّث حقل payment_status في جدول bookings.
